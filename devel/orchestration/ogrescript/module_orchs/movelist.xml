<define procedure="Stage_movelist" ARG_0="int">
    <properties file="${mypath}/module_orchs/movelist.properties"/>
    <env/>
    <properties sysprops="true"/>
    <send>
        <progress-event message="Begin Stage_movelist">
            <header-property name="some-special-id" value="${ensemble.id}-Main-Begin-Stage_movelist"/>
        </progress-event>
    </send>
    <echo stdout="true" message=" - Begin Stage_movelist"/>
    <declare name="end" long="$E{ ${ccd.stop} + 1 }"/>
    <declare name="i" int="0"/>
    <for var="i" from="${ccd.start}" condition="$E{${i} &lt; ${end}}">
        <declare name="in" long="0"/>
        <add-leading-zeros number="${i}" places="2">
            <return-value defaultName="zerosAdded" assignedName="in"/>
        </add-leading-zeros>
        <echo stdout="true" message=" -- Running Stage_movelist - GridFTP lists for CCD${in} ... "/>
        <declare name="srcdir" string="${local_listpath}/log"/>
        <declare name="targetdir" string="${targetprot}://${tgrid_server_${site}}${tgrid_homepath_${site}}/${uid}_${in}/data/${nite}"/>
<!--
               <copy sourceDir="${srcdir}" target="${targetdir}" />
-->
        <copy>
            <source base="file:${srcdir}/">
                <include>*</include>
            </source>
            <target>file:${targetdir}</target>
        </copy>
<!--
   <copy taskName="test_copy" verbose="true">
        <targetGroup targetURI="${targetdir}">
               <pattern base="${srcdir}">
               </pattern>
        </targetGroup>
   </copy>
-->
    </for>
    <echo stdout="true" message=" - Stage_movelist done"/>
    <echo stdout="true" message="  "/>
    <send>
        <progress-event message="End Stage_movelist">
            <header-property name="some-special-id" value="${ensemble.id}-Main-End-Stage_movelist"/>
        </progress-event>
    </send>
</define>

