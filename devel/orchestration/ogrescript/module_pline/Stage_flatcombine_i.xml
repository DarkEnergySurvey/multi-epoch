   <target name="Stage_flatcombine_i" description="create i band flat correction">
        <esequence>

             <write path="${local.out}/${flatcombine.log}" text="true"
                   errorProperty="failed" rethrow="false" append="true">
                   <segment string=" -- flatcombine results for ${flati.list}" lineBreaks="1"/>
             </write>

               <edeclare name="abpm"  string="${bpm.fits.name}"/>
               <edeclare name="abias" string="${bias.fits.path}/${bias.fits.name}"/>
               <edeclare name="alist" string="${flati.list}"/>
               <edeclare name="afile" string="${flati.fits.path}/${flati.fits.name}"/>

        <rtexec inheritedEnv="false" execDir="${nite.dir}"
           args="${flatcombine.exec} ${flatcombine.args}" quiet="true">
           <errMonitor file="${local.out}/${flatcombine.log}"/>
           <outMonitor file="${local.out}/${flatcombine.log}"/>
        </rtexec>

             <write path="${local.out}/${flatcombine.log}" text="true"
                   errorProperty="failed" rethrow="false" append="true">
                   <segment string=" -- flatcombine complete " lineBreaks="2"/>
             </write>

        </esequence>
   </target>
