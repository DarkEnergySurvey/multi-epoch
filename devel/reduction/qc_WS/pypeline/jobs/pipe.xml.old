<?xml version="1.0" encoding="UTF-8"?>
<job>
  <config>
    <rootDir>/home/martelli/base</rootDir>
    <dataRepository>/home/martelli/data</dataRepository>
  </config>

  <components>

    <component id="origin">
      <data>
        <file value="trim.fits" type="fits_image" id="test"/>
        <file value="trim.weight.fits" type="fits_weightmap_image" id="test.weight"/>
        <file value="USNOB1.fits" type="fits_catalog" id="ref_file"/>
      </data>
    </component>

    <component id="fits2jpeg1">
      <module>fits2jpeg</module>
      <input>
      	<file source="origin" type="fits_image" id="test"/>
      </input>	
      <config>
        <scalar id="min_image_value" type="float" value="0.1" />
        <scalar id="max_image_value" type="float" value="0.2" />
      </config>
    </component>

    <component id="SExtractor1">
      <module>sextractor1</module>
      <input>
      	<file source="origin" type="fits_image" id="test"/>
      	<file source="origin" type="fits_weightmap_image" id="test.weight"/>
      </input>	
      <config>
        <scalar id="gain" type="float" value="28749.870457" />
        <scalar id="pixel_scale" type="float" value="0.238" />
        <scalar id="mag_zeropoint" type="float" value="24.688" />
      </config>
    </component>

    <component id="SExtractor2">
      <module>sextractor2</module>
      <input>
      	<file source="origin" type="fits_image" id="test"/>
      	<file source="origin" type="fits_weightmap_image" id="test.weight"/>
	<config source="SExtractor1" type="float" id="seeing"/>
      </input>	
      <config>
        <scalar id="gain" type="float" value="28749.870457" />
        <scalar id="pixel_scale" type="float" value="0.238" />
        <scalar id="mag_zeropoint" type="float" value="24.688" />
      </config>
    </component>

    <component id="selection1">
      <module>selection</module>
      <input>
        <file source="origin" type="fits_image" id="test"/>
      	<file source="origin" type="fits_weightmap_image" id="test.weight"/>
      	<file source="SExtractor2" type="fits_catalog" id="test_out"/>
      </input>	
      <config>
        <scalar id="mag_lim" type="float" value="14.0" />
        <scalar id="sigma_cut" type="float" value="5.0" />
      </config>
    </component>

    <component id="classification1">
      <module>classification</module>
      <input>
      	<file source="selection1" type="fits_catalog" id="test_out"/>
      </input>	
      <config>
        <scalar id="band" type="string" value="B" />
        <scalar id="cs_lim" type="float" value="0.9" />
      </config>
    </component>

    <component id="astrometry1">
      <module>astrometry</module>
      <input>
      	<file source="classification1" type="fits_catalog" id="test_out"/>
      	<file source="origin" type="fits_catalog" id="ref_file"/>
      </input>	
      <config>
        <scalar id="ang_sep" type="float" value="1.0" />
      </config>
    </component>

    <component id="spatial1">
      <module>spatial</module>
      <input>
      	<file source="classification1" type="fits_catalog" id="test_out"/>
      </input>	
      <config>
      </config>
    </component>

    <component id="psf1">
      <module>psf</module>
      <input>
      	<file source="classification1" type="fits_catalog" id="test_out"/>
      </input>	
      <config>
      </config>
    </component>

    <component id="counts1">
      <module>counts</module>
      <input>
      	<file source="classification1" type="fits_catalog" id="test_out"/>
      </input>	
      <config>
      </config>
    </component>

    <component id="photometry1">
      <module>photometry</module>
      <input>
      	<file source="classification1" type="fits_catalog" id="test_out"/>
      	<file source="origin" type="fits_catalog" id="ref_file"/>
      </input>	
      <config>
        <scalar id="ang_sep" type="float" value="1.0" />
        <scalar id="band" type="string" value="B" />
      </config>
    </component>

  </components>
</job>
