HOW TO RUN THE PHOTOMETRIC STANDARDS MODULE OUTSIDE OF OGRE/ELF

1. Set the DESPHOTOSTDSMOD_HOME environment variable to the
   top level directory of the DESPhotoStdsMod product. E.g., 
   on des.cosmology.uiuc.edu: 
      setenv DESPHOTOSTDSMOD_HOME /home/dtucker/DESPhotoStdsMod

2. Set the JAVA_HOME environment variable to the top level 
   directory of j2sdk; e.g., on des.cosmology.uiuc.edu:
       setenv JAVA_HOME /usr/java/j2sdk1.4.2_09

3. Change to the $DESPHOTOSTDSMOD_HOME directory:
       cd $DESPHOTOSTDSMOD_HOME

4. Source the setup script (currently, csh only):
       source bin/setup.csh
 
5. Run the Photometric Standards Module; the following
   command will output a single PSM_QA plot and add a single 
   entry to the psmfit_test table (in this case, for the r filter):
      java gov.fnal.eag.dtucker.desPhotoStds.PhotomEqSolverRun jdbc:oracle:thin:@charon.ncsa.uiuc.edu:1521: des pipeline dc01user DECam "Blanco 4m" 2005oct09 r 29 16.0 18.0 3 2.5 OBJECTS FILES des_stripe82_stds_v1 psmfit_test v1.0 1

   The arguments are (in order):
      jdbc access point to database (here, jdbc:oracle:thin:@charon.ncsa.uiuc.edu:1521: )
                                    (jdbc:oracle:thin:@//sky.ncsa.uiuc.edu:1521/ also works)
      name of database (here, des)
      username (here, pipeline)
      password (here, dc01user)
      instrument name (here, DECam)
      telescope name (here, "Blanco 4m")
      nite (here, 2005oct09)
      filter to be solved for (here, r)
      ccd to solved for (here, 29; 0 = solve all CCDs simultaneously)
      magLo (here, 16.0), the low (bright) end of the range of 
          standard star mags to be matched to the observations 
      magHi (here, 18.0), the high (faint) end of the range of 
          standard star mags to be matched to the observations 
      niterations (here, 3), the number of times the fit is iterated  
          during outlier rejection (niterations must be >= 1; 
          for niterations=1, no outliers are removed)
      nsigma (here, 2.5), the number of sigma from the fit
          beyond which outliers are removed during each iteration
          of outlier rejection (the rms of the fit is recalculated
          for each iteration)
      objects table name (here, OBJECTS)
      files table name (here, FILES)
      standard stars table name (here, stripe82_stds_v1)
      psm fits table name (here, psmfit_test), the name of the DES database 
          table to which the fit results are outputted
      software version (here, v1.0); currently a dummy value
      verbosity level (here, 1); 0=little or no output to screen; 
          1 or more=lots of output to screen


   It takes about half a minute to run PhotomEqSolverRun on 2005oct09 on 
   a single filter for a standard star mag range (magLo, magHi) = (16.0, 18.0).
   These values work well for the g and r filters, pretty well for i, 
   maybe other values would be better for the z filter.

   Values of niterations=3, and nsigma=2.5 generally work pretty well
   (and are, in fact, the default values used for SDSS standard star
   work).

   If successful, PhotomEqSolverRun will create a postscript plot 
   called PSM_QA_<nite><filter><ccdid>_<fitTable><psmfit_id>.ps 
   in your current directory -- e.g., PSM_QA_2005oct09r1_psmfit_test29.ps,
   where psmfit_id is the value of psmfit_id for this fit's entry
   in the fitTable.

   There will also be a new entry in the fitTable in the DES database.  
   To see this new entry, log on to the DES Oracle database from des.cosmology.uiuc.edu --

       sqlplus username/password@sky/DES

   (where username and password are the appropriate username
   and password to logon to the DES Oracle database) and run the
   following query:

      select * from psmfit_test order by fit_timestamp; 

   You should get output like the following, where the last
   entry would be the one just added by PhotomEqSolverRun:

SQL> select * from psmfit_test order by fit_timestamp;

 Psmfit_ID NITE              MJDLO      MJDHI      CCDID FILTER            A
---------- ------------ ---------- ---------- ---------- -------- ----------
      AERR          B       BERR          K       KERR        RMS       CHI2
---------- ---------- ---------- ---------- ---------- ---------- ----------
       DOF PHOTOMETRICFLAG PSMVERSION
---------- --------------- --------------------
FIT_TIMESTAMP
---------------------------------------------------------------------------
       253 2005oct09            -1         -1         58 i        -25.577231
   .009422          0          0    .097055    .022325    .039063   4.904625
         7               0 v1.0
24-JAN-06 07.44.42.6 PM





